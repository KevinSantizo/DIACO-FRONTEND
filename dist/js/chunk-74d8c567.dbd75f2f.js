(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74d8c567"],{"4930b":function(t,e,n){},ac1d:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{id:"regular-tables",fluid:"",tag:"section"}},[[n("v-row",[1==t.permissions?n("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({staticClass:"ml-4",attrs:{outlined:"",color:"#1D3557"}},"v-btn",o,!1),a),[n("v-icon",{attrs:{size:"30"}},[t._v("mdi-plus")])],1),n("v-btn",{staticClass:"ml-5",attrs:{color:"#101729",outlined:""},on:{click:function(e){return t.getComerceDetail()}}},[n("v-icon",{attrs:{size:"30",dark:""}},[t._v("mdi-refresh")])],1)]}}],null,!1,2756387424),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("form",{on:{submit:t.onSubmit}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Agregar sucursal para "+t._s(t.company.name_company)+" ")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.form.store_branch_town,expression:"form.store_branch_town"}],staticClass:"select-css",attrs:{name:"store_branch_town"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"store_branch_town",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Municipio")]),t._l(t.towns,(function(e,a){return n("option",{key:a,attrs:{id:e.id},domProps:{value:e.id}},[t._v(t._s(e.name_town)+" - "+t._s(e.city.name_city)+" - "+t._s(e.city.region.name_region)+" ")])}))],2)])]),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Nombre*",name:"name_store_branch",required:""},model:{value:t.form.name_store_branch,callback:function(e){t.$set(t.form,"name_store_branch",e)},expression:"form.name_store_branch"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Dirección",name:"address",required:""},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Teléfono",name:"phone",required:""},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone","string"===typeof e?e.trim():e)},expression:"form.phone"}})],1),n("input",{directives:[{name:"model",rawName:"v-model",value:this.form.company,expression:"this.form.company"}],attrs:{type:"hidden",id:t.company.id,name:"company"},domProps:{value:this.form.company},on:{input:function(e){e.target.composing||t.$set(this.form,"company",e.target.value)}}})],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{staticClass:"mr-3",attrs:{color:"#1D3557",outlined:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancelar")]),n("v-btn",{attrs:{type:"submit",color:"#1D3557",raised:""},on:{click:function(e){t.dialog=!1}}},[t._v("Guardar")])],1)],1)],1)]):t._e()],1)],n("h1",{staticClass:"heading-1 mt-3"},[t._v(t._s(t.company.name_company))]),n("v-row",t._l(t.company.stores,(function(e,a){return n("v-col",{key:a,attrs:{cols:"12",lg:"4"}},[n("v-card",{staticStyle:{"text-decoration":"none"},attrs:{elevation:"5",to:"/index/store-branch/"+e.id+"/store"}},[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"headline mb-1"},[t._v(t._s(e.name_store_branch))]),n("v-list-item-subtitle",[t._v("Quejas: "+t._s(e.total_complains))]),n("v-list-item-subtitle",{staticClass:"mt-2"},[t._v(t._s(e.address)+" "+t._s(e.store_branch_town.name_town)+" "+t._s(e.store_branch_town.city.name_city))])],1),n("v-list-item-avatar",{attrs:{tile:"",size:"50",color:"info"}},[n("v-icon",{attrs:{color:"white",size:"40"}},[t._v("mdi-store")])],1)],1),n("div",{staticClass:"ml-5 mb-5 pb-2"},[t._v(" Región "),n("span",{staticClass:"red--text"},[t._v(t._s(e.store_branch_town.city.region.name_region))])])],1)],1)})),1)],2)},o=[],r=(n("7db0"),n("96cf"),n("1da1")),s=n("bc3a"),c=n.n(s),i=n("1940"),l=n.n(i),m="http://192.168.0.106:8000/",u={data:function(){return{dialog:!1,permissions:"",idUser:"",towns:[],companyId:this.$route.params.companyId,company:[],stores:[],form:{name_store_branch:"",address:"",company:"",phone:"",store_branch_town:""}}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"http://127.0.0.1:8000/api/regions/",n="".concat(m,"api/commerces-stores/").concat(t.companyId,"/"),e.next=4,c.a.get(n).then((function(e){return t.company=e.data,t.form.company=t.company.id,console.log(t.form.company),console.log(t.company),c.a.get(m+"api/stores-children/")})).then((function(e){t.stores=e.data,console.log(t.stores)})).catch((function(t){console.log(t)}));case 4:return e.next=6,c.a.get("".concat(m,"api/towns/")).then((function(e){t.towns=e.data})).catch((function(t){console.log(t)}));case 6:case"end":return e.stop()}}),e)})))()},methods:{getUser:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=m+"api/users/",e.next=3,c.a.get(n).then((function(e){t.users=e.data,console.log(t.users);var n=t.users.find((function(e){return e.id==t.$store.state.user}));t.permissions=null===n||void 0===n?void 0:n.permissions,t.idUser=null===n||void 0===n?void 0:n.id,console.log(t.idUser),console.log(n.username),console.log(n.permissions)}));case 3:case"end":return e.stop()}}),e)})))()},onSubmit:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.preventDefault(),a="".concat(m,"api/store-branches/"),n.next=4,c.a.post(a,e.form).then((function(t){e.form.name_store_branch=t.data.name_store_branch,e.form.address=t.data.address,e.form.company=t.data.company,e.form.phone=t.data.phone,e.form.store_branch_town=t.data.store_branch_town,l()("Comercio agregado.","","success")})).catch((function(t){console.log(t)}));case 4:case"end":return n.stop()}}),n)})))()},getComerceDetail:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="".concat(m,"api/commerces-stores/").concat(t.companyId,"/"),e.next=3,c.a.get(n).then((function(e){t.company=e.data,t.form.company=t.company.id,console.log(t.form.company),console.log(t.company)})).catch((function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()}},created:function(){this.getUser()}},d=u,p=(n("d5b6"),n("2877")),v=n("6544"),f=n.n(v),_=n("8336"),h=n("b0af"),b=n("99d9"),g=n("62ad"),y=n("a523"),w=n("169a"),x=n("132d"),C=n("da13"),k=n("8270"),V=n("5d23"),I=n("0fd9"),R=n("2fa4"),D=n("8654"),$=Object(p["a"])(d,a,o,!1,null,null,null);e["default"]=$.exports;f()($,{VBtn:_["a"],VCard:h["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:g["a"],VContainer:y["a"],VDialog:w["a"],VIcon:x["a"],VListItem:C["a"],VListItemAvatar:k["a"],VListItemContent:V["a"],VListItemSubtitle:V["b"],VListItemTitle:V["c"],VRow:I["a"],VSpacer:R["a"],VTextField:D["a"]})},d5b6:function(t,e,n){"use strict";var a=n("4930b"),o=n.n(a);o.a}}]);
//# sourceMappingURL=chunk-74d8c567.dbd75f2f.js.map